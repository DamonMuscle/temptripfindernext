<div class="tf-contextmenu-wrap filtermenu-wrap phone-wrap">
	<ul class="tf-contextmenu" data-bind="css:{'overFlow-Hidden':!gridViewModel.obShowSplitmap()}">
		<li class="menu-divider"></li>
		<!--ko if:tf.permissions.filtersAdd -->
		<li class="menu-item disable-auto-close" data-bind="contextMenuClick:searchGrid.createNewFilterClick">
			<div class="menu-icon">
			</div>
			<div class="menu-label">
				New Filter
			</div>
		</li>
		<!--/ko -->
		<!--ko if:tf.permissions.filtersEdit && searchGrid.saveFilterClick-->
		<li class="menu-item" data-bind="contextMenuClick:searchGrid.saveFilterClick,css:{disabled:searchGrid.obSelectedGridFilterId()<0 
		|| searchGrid.obSelectedGridFilterId() === null  || searchGrid.obSelectedGridFilterId() === undefined || searchGrid.obIsSystemFilter() || searchGrid.options.fromSearch}">
			<div class="menu-icon saveas">
			</div>
			<div class="menu-label">
				Save
			</div>
		</li>
		<!--/ko -->
		<!--ko if:tf.permissions.filtersAdd && searchGrid.saveAsNewFilterClick-->
		<li class="menu-item disable-auto-close" data-bind="contextMenuClick:searchGrid.saveAsNewFilterClick,css:{disabled:searchGrid.obSelectedGridFilterId()<0 
		&& !searchGrid.obSelectedGridFilterClause() || !!searchGrid.obSelectedStaticFilterName() || searchGrid.obIsSystemFilter() || searchGrid.options.fromSearch}">
			<div class="menu-icon">
			</div>
			<div class="menu-label">
				Save As New Filter
			</div>
		</li>
		<!--/ko -->
		<!--ko if:tf.permissions.filtersEdit || tf.permissions.filtersAdd || tf.permissions.filtersDelete -->
		<li class="menu-item disable-auto-close" data-bind="contextMenuClick:searchGrid.manageFilterClick">
			<div class="menu-icon">
			</div>
			<div class="menu-label">
				Manage Filters
			</div>
		</li>
		<!--/ko -->
		<!--ko if:searchGrid.quickFilterBarClick -->
		<li class="menu-item menu-item-quick-filter" data-bind="contextMenuClick:searchGrid.quickFilterBarClick,css:searchGrid.obQuickFilterBarCheckIcon">
			<div class="menu-icon">
			</div>
			<div class="menu-label">
				Quick Filter Bar
			</div>
			<div class="menu-icon menu-icon-mobile">
			</div>
		</li>
		<!--/ko -->
		<li class="menu-divider">
			<div class="rule"></div>
		</li>
		<!--ko if:searchGrid.obShowGeoRegionType -->
		<li class="menu-item" data-bind="css:{disabled:searchGrid.obGeoRegionTypes().length==0}">
			<div class="menu-icon">
			</div>
			<div class="menu-label">
				Geo Region Type
			</div>
			<!--ko if: searchGrid.obGeoRegionTypes().length > 0 -->
			<ul class="tf-contextmenu">
				<!--ko foreach: searchGrid.obGeoRegionTypes-->
				<li class="menu-item" data-bind="
					contextMenuClick:$parent.searchGrid.geoRegionTypeClick,
					css:{'menu-item-checked':$data.Id==$parent.searchGrid.obSelectedGeoRegionTypeId()}">
					<div class="menu-icon">
					</div>
					<div class="menu-label" data-bind="text:Name">
					</div>
				</li>
				<!--/ko -->
			</ul>
			<!--/ko -->
		</li>
		<li class="menu-divider">
			<div class="rule"></div>
		</li>
		<!--/ko -->
		<!--ko if:searchGrid.obShowNonEligibleZone -->
		<li class="menu-item" data-bind="css:{disabled:searchGrid.obNonEligibleZones().length==0}">
			<div class="menu-icon">
			</div>
			<div class="menu-label">
				School Non Eligible Zone
			</div>
			<!--ko if: searchGrid.obNonEligibleZones().length > 0 -->
			<ul class="tf-contextmenu">
				<!--ko foreach: searchGrid.obNonEligibleZones-->
				<li class="menu-item" data-bind="
									contextMenuClick:$parent.searchGrid.nonEligibleZoneClick,
									css:{'menu-item-checked':$data.OBJECTID==$parent.searchGrid.obSelectedNonEligibleZoneId()}">
					<div class="menu-icon">
					</div>
					<div class="menu-label" data-bind="text:$data.School+' - '+$data.Name">
					</div>
				</li>
				<!--/ko -->
			</ul>
			<!--/ko -->
		</li>
		<li class="menu-divider">
			<div class="rule"></div>
		</li>
		<!--/ko -->

		<!--ko if:searchGrid.obGridFilterDataModelsFormDashBoard && searchGrid.obGridFilterDataModelsFormDashBoard().length > 0 -->
		<li class="menu-item" data-bind="css:{disabled:searchGrid.obGridFilterDataModelsFormDashBoard && searchGrid.obGridFilterDataModelsFormDashBoard().length==0}">
			<div class="menu-icon">
			</div>
			<div class="menu-label">
				System Filters
			</div>
			<!--ko if: searchGrid.obGridFilterDataModelsFormDashBoard().length > 0 -->
			<ul class="tf-contextmenu">
				<!--ko foreach: searchGrid.obGridFilterDataModelsFormDashBoard-->
				<li class="menu-item" data-bind="
					contextMenuClick:$parent.searchGrid.gridFilterClick.bind($parent.searchGrid),
				    attr: { title: name },
					css:{'menu-item-checked':$data.id()==$parent.searchGrid.obSelectedGridFilterId()}">
					<div class="menu-icon">
					</div>
					<div class="menu-label" data-bind="text:name">
					</div>
				</li>
				<!--/ko -->
			</ul>
			<!--/ko -->
		</li>
		<li class="menu-divider">
			<div class="rule"></div>
		</li>
		<!--/ko -->

		<!--ko if:searchGrid.setReminder&&!tf.isViewfinder -->
		<li class="menu-item" data-bind="css:{disabled:!searchGrid.reminderMenuEnable() },contextMenuClick:searchGrid.setReminder.bind(searchGrid)">
			<div class="menu-icon">
			</div>
			<div class="menu-label">
				Set Reminder
			</div>
		</li>
		<li class="menu-divider">
			<div class="rule"></div>
		</li>
		<!--/ko -->
		<li class="menu-item" data-bind="contextMenuClick:searchGrid.clearGridFilterClick.bind(searchGrid)">
			<div class="menu-icon">
			</div>
			<div class="menu-label">
				Clear
			</div>
		</li>


		<!--ko if:TF.isPhoneDevice -->
		<!--ko if:
			(searchGrid.options && searchGrid.options.specialFilterMenuItemTemplate) ||
			(searchGrid.obGridFilterDataModelsFromDataBase().length > 0) ||
			(searchGrid.obGridFilterDataModelsFromRelatedFilter().length > 0)
		-->
		<!--/ko -->

		<!--ko if:searchGrid.obGridFilterDataModelsFromDataBase().length > 0 -->
		<li class="menu-divider">
			<div class="rule"></div>
		</li>
		<!--/ko -->
		<div data-bind="css:{'special-item-container':!gridViewModel.obShowSplitmap()}">
			<!--ko if:searchGrid.options && searchGrid.options.specialFilterMenuItemTemplate -->
			<!--ko if:searchGrid.obGridFilterDataModelsFromDataBase().length == 0 -->
			<li class="menu-divider">
				<div class="rule"></div>
			</li>
			<!--/ko -->
			<li class="menu-item" data-bind="contextMenuClick:searchGrid.options.specialFilterMenuItemTemplate.menuItemClick.bind(searchGrid)">
				<div class="menu-icon">
				</div>
				<div class="menu-label" data-bind="text:searchGrid.options.specialFilterMenuItemTemplate.menuItemText">
				</div>
			</li>
			<!--ko if:searchGrid.obGridFilterDataModelsFromDataBase().length > 0 -->
			<li class="menu-divider">
				<div class="rule"></div>
			</li>
			<!--/ko -->
			<!--/ko -->
			<!--ko foreach:searchGrid.obGridFilterDataModelsFromRelatedFilter -->
			<li class="menu-item" data-bind="
					contextMenuClick: $parent.searchGrid.gridFilterClick.bind($parent.searchGrid),
					attr: {
						title: ($data.isValid() ? whereClause:'Filter syntax is invalid. It cannot be applied.')
					},
					css: {
						'menu-item-broken': !$data.isValid(),
						'menu-item-dbspecific':$data.dBID()!=null,
						'menu-item-checked': $data.id()==$parent.searchGrid.obSelectedGridFilterId()
					}">
				<div class="menu-icon">
				</div>
				<div class="menu-label" data-bind="text:name">
				</div>
			</li>
			<!--/ko -->
			<!--ko if:searchGrid.obGridFilterDataModelsFromDataBase().length > 0 -->
			<!--ko foreach:searchGrid.obGridFilterDataModelsFromDataBase -->
			<li class="menu-item" data-bind="
					contextMenuClick: $parent.searchGrid.gridFilterClick.bind($parent.searchGrid),
					attr: {
						title: ($data.isValid() ? whereClause:'Filter syntax is invalid. It cannot be applied.')
					},
					css: {
						'menu-item-broken': !$data.isValid(),
						'menu-item-dbspecific':$data.dBID()!=null,
						'menu-item-checked': $data.id()==$parent.searchGrid.obSelectedGridFilterId()
					}">
				<div class="menu-icon">
				</div>
				<div class="menu-label" data-bind="text:name">
				</div>
			</li>
			<!--/ko -->
			<!--/ko -->
		</div>
		<!--/ko -->
		<!--ko if:!TF.isPhoneDevice -->
		<!--ko if:searchGrid.options && searchGrid.options.specialFilterMenuItemTemplate -->
		<li class="menu-divider">
			<div class="rule"></div>
		</li>
		<li class="menu-item" data-bind="contextMenuClick:searchGrid.options.specialFilterMenuItemTemplate.menuItemClick.bind(searchGrid)">
			<div class="menu-icon">
			</div>
			<div class="menu-label" data-bind="text:searchGrid.options.specialFilterMenuItemTemplate.menuItemText">
			</div>
		</li>
		<!--/ko -->
		<!--ko if:searchGrid.obGridFilterDataModelsFromDataBase().length > 0 -->
		<li class="menu-divider">
			<div class="rule"></div>
		</li>
		<!--ko foreach:searchGrid.obGridFilterDataModelsFromDataBase -->
		<li class="menu-item" data-bind="
					contextMenuClick: $parent.searchGrid.gridFilterClick.bind($parent.searchGrid),
					attr: {
						title: ($data.isValid() ? whereClause:'Filter syntax is invalid. It cannot be applied.')
					},
					css: {
						'menu-item-broken': !$data.isValid(),
						'menu-item-dbspecific':$data.dBID()!=null,
						'menu-item-checked': $data.id()==$parent.searchGrid.obSelectedGridFilterId()
					}">
			<div class="menu-icon">
			</div>
			<div class="menu-label" data-bind="text:name">
			</div>
		</li>
		<!--/ko -->
		<!--/ko -->
		<!--/ko -->
		<li class="menu-divider"></li>
	</ul>
</div>