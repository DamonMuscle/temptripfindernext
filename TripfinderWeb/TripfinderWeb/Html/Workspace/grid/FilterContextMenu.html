<div class="tf-contextmenu-wrap filtermenu-wrap phone-wrap">
	<ul class="tf-contextmenu">
		<li class="menu-divider"></li>
		<!--ko if:tf.permissions.filtersAdd -->
		<li class="menu-item disable-auto-close" data-bind="contextMenuClick:searchGrid.createNewFilterClick">
			<div class="menu-icon">
			</div>
			<div class="menu-label">
				New Filter
			</div>
		</li>
		<!--/ko -->
		<!--ko if:tf.permissions.filtersEdit -->
		<li class="menu-item" data-bind="contextMenuClick:searchGrid.saveFilterClick,css:{disabled:searchGrid.obSelectedGridFilterId()<0 || searchGrid.obSelectedGridFilterId() === null  || searchGrid.obSelectedGridFilterId() === undefined}">
			<div class="menu-icon saveas">
			</div>
			<div class="menu-label">
				Save
			</div>
		</li>
		<!--/ko -->
		<!--ko if:tf.permissions.filtersAdd -->
		<li class="menu-item disable-auto-close" data-bind="contextMenuClick:searchGrid.saveAsNewFilterClick,css:{disabled:searchGrid.obSelectedGridFilterId()<0 && !searchGrid.obSelectedGridFilterClause()}">
			<div class="menu-icon">
			</div>
			<div class="menu-label">
				Save As New Filter
			</div>
		</li>
		<!--/ko -->
		<!--ko if:tf.permissions.filtersEdit || tf.permissions.filtersAdd || tf.permissions.filtersDelete -->
		<li class="menu-item disable-auto-close" data-bind="contextMenuClick:searchGrid.manageFilterClick">
			<div class="menu-icon">
			</div>
			<div class="menu-label">
				Manage Filters
			</div>
		</li>
		<!--/ko -->
		<!--ko if: searchGrid.options && searchGrid.options.isGridView -->
		<li class="menu-item menu-item-quick-filter" data-bind="contextMenuClick:searchGrid.quickFilterBarClick,css:searchGrid.obQuickFilterBarCheckIcon">
			<div class="menu-icon">
			</div>
			<div class="menu-label">
				Quick Filter Bar
			</div>
		</li>
		<!--/ko -->
		<li class="menu-divider">
			<div class="rule"></div>
		</li>
		<li class="menu-item" data-bind="contextMenuClick:searchGrid.clearGridFilterClick.bind(searchGrid)">
			<div class="menu-icon">
			</div>
			<div class="menu-label">
				Clear
			</div>
		</li>

		<!--ko if:searchGrid.options.gridType==="fieldtrip" && searchGrid.options.isCalendarView -->
		<li class="menu-divider">
			<div class="rule"></div>
		</li>

		<!--ko foreach:searchGrid.obFieldTripStageFilters -->
		<li class="menu-item" data-bind="contextMenuClick: $parent.searchGrid.gridFieldTripFilterClick.bind($parent.searchGrid),css: {'menu-item-checked': $.inArray($data, $parent.searchGrid.selectedFieldTripStageFilters())>=0}">
			<div class="menu-icon">
			</div>
			<div class="field-trip-color" data-bind="style: { backgroundColor: tf.fieldTripGridDefinition.gridDefinition().stageFormatter($data)}"></div>
			<div class="menu-label" data-bind="text:$parent.searchGrid.getFieldTripStageName($data)">
			</div>
		</li>
		<!--/ko -->
		<!--/ko -->
		<!--ko if:TF.isPhoneDevice -->
		<!--ko if:
			(searchGrid.options && searchGrid.options.specialFilterMenuItemTemplate) ||
			(searchGrid.obGridFilterDataModelsFromDataBase().length > 0) ||
			(searchGrid.obGridFilterDataModelsFormDashBoard().length > 0)||
			(searchGrid.obGridFilterDataModelsFromRelatedFilter().length > 0)
		-->
		<!--/ko -->
		<!--ko if:searchGrid.obGridFilterDataModelsFromDataBase().length > 0 -->
		<li class="menu-divider">
			<div class="rule"></div>
		</li>
		<!--/ko -->
		<div class="special-item-container">
			<!--ko if:searchGrid.options && searchGrid.options.specialFilterMenuItemTemplate -->
			<!--ko if:searchGrid.obGridFilterDataModelsFromDataBase().length == 0 -->
			<li class="menu-divider">
				<div class="rule"></div>
			</li>
			<!--/ko -->
			<li class="menu-item" data-bind="contextMenuClick:searchGrid.options.specialFilterMenuItemTemplate.menuItemClick.bind(searchGrid)">
				<div class="menu-icon">
				</div>
				<div class="menu-label" data-bind="text:searchGrid.options.specialFilterMenuItemTemplate.menuItemText">
				</div>
			</li>
			<!--ko if:searchGrid.obGridFilterDataModelsFromDataBase().length > 0 -->
			<li class="menu-divider">
				<div class="rule"></div>
			</li>
			<!--/ko -->
			<!--/ko -->
			<!--ko foreach:searchGrid.obGridFilterDataModelsFromRelatedFilter -->
			<li class="menu-item" data-bind="
					contextMenuClick: $parent.searchGrid.gridFilterClick.bind($parent.searchGrid),
					attr: {
						title: ($data.isValid() ? whereClause:'Filter syntax is invalid. It cannot be applied.')
					},
					css: {
						'menu-item-broken': !$data.isValid(),
						'menu-item-checked': $data.id()==$parent.searchGrid.obSelectedGridFilterId()
					}">
				<div class="menu-icon">
				</div>
				<div class="menu-label" data-bind="text:name">
				</div>
			</li>
			<!--/ko -->
			<!--ko if:searchGrid.obGridFilterDataModelsFromDataBase().length > 0 -->
			<!--ko foreach:searchGrid.obGridFilterDataModelsFromDataBase -->
			<li class="menu-item" data-bind="
					contextMenuClick: $parent.searchGrid.gridFilterClick.bind($parent.searchGrid),
					attr: {
						title: ($data.isValid() ? whereClause:'Filter syntax is invalid. It cannot be applied.')
					},
					css: {
						'menu-item-broken': !$data.isValid(),
						'menu-item-checked': $data.id()==$parent.searchGrid.obSelectedGridFilterId()
					}">
				<div class="menu-icon">
				</div>
				<div class="menu-label" data-bind="text:name">
				</div>
			</li>
			<!--/ko -->
			<!--/ko -->
			<!--ko if:searchGrid.obGridFilterDataModelsFormDashBoard().length > 0 -->
			<li class="menu-divider">
				<div class="rule"></div>
			</li>
			<!--ko foreach:searchGrid.obGridFilterDataModelsFormDashBoard -->
			<li class="menu-item dashboad" data-bind="contextMenuClick:$parent.searchGrid.gridFilterClick.bind($parent.searchGrid),attr: { title: 'Filter is a Dashboard Drill Down. It cannot be modified.' },css:{'menu-item-checked':$data.id()==$parent.searchGrid.obSelectedGridFilterId()}">
				<div class="menu-icon">
				</div>
				<div class="menu-label" data-bind="text:name">
				</div>
			</li>
			<!--/ko -->
			<!--/ko -->

		</div>
		<!--/ko -->
		<!--ko if:!TF.isPhoneDevice -->
		<!--ko if:searchGrid.options && searchGrid.options.specialFilterMenuItemTemplate -->
		<li class="menu-divider">
			<div class="rule"></div>
		</li>
		<li class="menu-item" data-bind="contextMenuClick:searchGrid.options.specialFilterMenuItemTemplate.menuItemClick.bind(searchGrid)">
			<div class="menu-icon">
			</div>
			<div class="menu-label" data-bind="text:searchGrid.options.specialFilterMenuItemTemplate.menuItemText">
			</div>
		</li>
		<!--/ko -->
		<!--ko if:searchGrid.obGridFilterDataModelsFromDataBase().length > 0 -->
		<li class="menu-divider">
			<div class="rule"></div>
		</li>

		<!--ko foreach:searchGrid.obGridFilterDataModelsFromDataBase -->
		<li class="menu-item" data-bind="
					contextMenuClick: $parent.searchGrid.gridFilterClick.bind($parent.searchGrid),
					attr: {
						title: ($data.isValid() ? whereClause:'Filter syntax is invalid. It cannot be applied.')
					},
					css: {
						'menu-item-broken': !$data.isValid(),
						'menu-item-checked': $data.id()==$parent.searchGrid.obSelectedGridFilterId()
					}">
			<div class="menu-icon">
			</div>
			<div class="menu-label" data-bind="text:name">
			</div>
		</li>
		<!--/ko -->
		<!--/ko -->
		<!--ko if:searchGrid.obGridFilterDataModelsFormDashBoard().length > 0 -->
		<li class="menu-divider">
			<div class="rule"></div>
		</li>
		<!--ko foreach:searchGrid.obGridFilterDataModelsFormDashBoard -->
		<li class="menu-item dashboad" data-bind="
					contextMenuClick:$parent.searchGrid.gridFilterClick.bind($parent.searchGrid),
					attr: { title: 'Filter is a Dashboard Drill Down. It cannot be modified.' },
					css:{'menu-item-checked':$data.id()==$parent.searchGrid.obSelectedGridFilterId()}">
			<div class="menu-icon">
			</div>
			<div class="menu-label" data-bind="text:name">
			</div>
		</li>
		<!--/ko -->
		<!--/ko -->
		<!--/ko -->
		<li class="menu-divider"></li>
	</ul>
</div>