<div class="item-header panel-grid-header routing-palette-head">
	<div class="icon travel-regions">
		<div class="badge" data-bind="text:dataModel.lockData.obOtherChangeCount(),visible:dataModel.lockData.obOtherChangeCount()>0"></div>
		<div class="tooltip" data-bind="toolTip">
			<div class="content">
				<span class="scroll-content" data-bind="html:dataModel.lockData.obOtherChangeContent()"></span> <a class="fix-at-bottom" data-bind="click:dataModel.lockData.refreshOtherChange">Refresh map</a>
			</div>
		</div>
	</div>
	<div class="title" data-bind="text:display.obStopPoolName() ? 'Stop Pool - ' + display.obStopPoolName() : 'Stop Pool'"></div>
	<div class="head-icon show-eye" data-bind="click:toggleShow,css:{'hide-eye':!isShowMode()},attr:{title:isShowMode()?'Hide Stop Pool':'Show Stop Pool'}"></div>
	<div class="save-icon head-icon" title="Save Changes On Current Tab" data-bind="click:eventsManager.saveClick.bind(eventsManager),visible:dataModel.lockData.obSelfChangeCount()>0">
		<div class="badge" data-bind="text:dataModel.lockData.obSelfChangeCount()"></div>
	</div>
</div>
<div class="school-boundary-grid content-container stop-pool-section">
	<div class="item-content panel-grid-content show" data-bind="uiInit:uiInit">
		<div class="parcelpalette mapeditingpalette" data-bind="with:eventsManager">
			<div class="directions-tool locate-tool parcelpoint-tool">
				<div class="print-setting-group" data-bind="dropDownMenu">
					<div class="icon file fixed-menu-btn" title="File" data-bind="css:{disable:!viewModel.isShowMode()}"></div>
					<div class="menu fileMenu withsub-menu with-sub-menu">
						<ul>
							<li class="menu-item">
								<div class="menuIcon"></div>
								<div class="menu-label text"><span>Open</span><span class="k-icon k-i-arrow-e"></span></div>
								<!-- ko if:  dataModel.stopPoolCategories().length>0 -->
								<div>
									<ul class="sub-menu sub-context-menu sub-context-menu-contain-icon" data-bind="foreach:{ data:dataModel.stopPoolCategories}">
										<li data-bind="css: {firstMenuItem:$index==0,active:$parent.dataModel.selectedCategory()&&$parent.dataModel.selectedCategory().Id&&$parent.dataModel.selectedCategory().Id==$data.Id},click:$parent.openClick">
											<div class="menu-label text"><span data-bind="text: Name"></span></div>
										</li>
									</ul>
								</div>
								<!-- /ko -->
								<!-- ko if:  dataModel.stopPoolCategories().length==0 -->
								<div>
									<ul class="sub-menu sub-context-menu sub-context-menu-contain-icon">
										<li class="firstMenuItem menu-item">
											<div class="menu-label text"><span>No Category Exist</span></div>
										</li>
									</ul>
								</div>
								<!-- /ko -->
							</li>
							<li class="menu-item" data-bind="clickButton:{click:manageCategoryClick,disable:!tf.authManager.isAuthorizedFor('routingMap',['add','edit'])}">
								<div class="menuIcon"></div>
								<div class="menu-label text"><span>Categories</span></div>
							</li>
							<li class="menu-divider">
								<div class="rule"></div>
							</li>
							<li class="firstMenuItem" data-bind="clickButton:{click:settingsClick,disable:!tf.authManager.isAuthorizedFor('routingMap',['add','edit'])}">
								<div class="menuIcon settings"></div>
								<div class="text"><span>Settings</span></div>
							</li>
							<li data-bind="clickButton:{click:saveClick,disable:!tf.authManager.isAuthorizedFor('routingMap',['add','edit'])||!obIsOpenCategory()}">
								<div class="menuIcon save"></div>
								<div class="text"><span>Save</span></div>
							</li>
							<li data-bind="clickButton:{click:revertClick,disable:!tf.authManager.isAuthorizedFor('routingMap',['add','edit'])||!obIsOpenCategory()}">
								<div class="menuIcon revert"></div>
								<div class="text"><span>Revert</span></div>
							</li>
						</ul>
					</div>
				</div>
				<div class="vertical-line"></div>
				<div class="print-setting-group create-dropdown-list" data-bind="dropDownMenu">
					<div class="icon fixed-menu-btn destination add-stop" title="Add Stop" data-bind="css:{disable:!tf.authManager.isAuthorizedFor('routingMap',['add','edit'])||!viewModel.isShowMode()||!obIsOpenCategory()}"></div>
					<div class="menu map-pinpoint-white withsub-menu">
						<ul>
							<li data-bind="click:createClick,mapModeStyleButton" mode="StopPool-Create">
								<div class="menuIcon"></div>
								<div class="text"><span>Add Stop from Map</span></div>
							</li>
							<li data-bind="click:createFromSearchResultClick" mode="StopPool-AddFromFile">
								<div class="menuIcon"></div>
								<div class="text"><span>Quick Add Stop(s)</span></div>
							</li>
							<li class="menu-divider">
								<div class="rule"></div>
							</li>
							<li data-bind="clickButton:{click:createTripStopFromSelectionClick,disable:obDisableCreateTripStop()}" mode="StopPool-Create-FromSelection">
								<div class="menuIcon"></div>
								<div class="text"><span>Copy to Trip Stop from Selection</span></div>
							</li>
						</ul>
					</div>
				</div>
				<div class="vertical-line"></div>
				<div class="print-setting-group" data-bind="dropDownMenu">
					<div class="icon select-area fixed-menu-btn select" title="Geo Select" data-bind="css:{disable:!viewModel.isShowMode()||!obIsOpenCategory()}"></div>
					<div class="menu map-pinpoint-white withsub-menu">
						<ul>
							<li class="polygon" data-bind="click:selectAreaOptionClick.bind($data,'polygon'),mapModeStyleButton">
								<div class="menuIcon polygon"></div>
								<div class="text"><span>Polygon</span></div>
							</li>
							<li class="rectangle" data-bind="click:selectAreaOptionClick.bind($data,'rectangle'),mapModeStyleButton">
								<div class="menuIcon rectangle"></div>
								<div class="text"><span>Rectangle</span></div>
							</li>
							<li class="draw" data-bind="click:selectAreaOptionClick.bind($data,'draw'),mapModeStyleButton">
								<div class="menuIcon draw"></div>
								<div class="text"><span>Draw</span></div>
							</li>
							<li class="circle" data-bind="click:selectAreaOptionClick.bind($data,'circle'),mapModeStyleButton">
								<div class="menuIcon circle"></div>
								<div class="text"><span>Circle</span></div>
							</li>
						</ul>
					</div>
				</div>
				<div class="vertical-line"></div>
				<div class="icon zoom-map-to-layers" title="Zoom Map to Layers" data-bind="clickButton:{disable:!viewModel.isShowMode()||!obIsOpenCategory(),click:centerMapClick}"></div>
				<div class="vertical-line"></div>
				<div class="print-setting-group" data-bind="dropDownMenu">
					<div class="icon select-all fixed-menu-btn" title="Select Stop" data-bind="css:{disable:!viewModel.isShowMode()||!obIsOpenCategory()}"></div>
					<div class="menu selectMenu withsub-menu">
						<ul>
							<li data-bind="click:selectAllClick">
								<div class="menuIcon select-all-white"></div>
								<div class="text"><span>Select All</span></div>
							</li>
							<li data-bind="click:deselectAllClick">
								<div class="menuIcon clear-all-white"></div>
								<div class="text"><span>Deselect All</span></div>
							</li>
						</ul>
					</div>
				</div>
				<div class="vertical-line"></div>
				<div class="icon boundary-details" data-bind="clickButton:{disable:!obHighlighted()||!viewModel.isShowMode()||!obIsOpenCategory(),click:menuInfoClick}" title="Info"></div>
				<div class="vertical-line"></div>
				<div class="icon delete" title="Delete" data-bind="clickButton:{disable:!tf.authManager.isAuthorizedFor('routingMap',['add','edit'])||!obHighlighted()||!viewModel.isShowMode()||!obIsOpenCategory(),click:deleteClick}"></div>
			</div>
		</div>
		<div class="pannel-item-content" data-bind="with:display,panelContentDrag:{displayArray: display.obStopPools}">
			<!-- ko foreach: obStopPools -->
			<div class="content-wrapper parcel-warpper" data-bind="css:{'selected':$data.obIsHighlighted()}">
				<div class="content-container boundary-planning-container" data-bind="event:{ click: $parent.selectStopPoolClick.bind($parent)}">
					<div class="left-column-icon-container">
						<div class="left-column-icon">
							<div class="content-type-icon lock" style="margin-left: 8px;" title="Locked" data-bind="visible:$data.obIsLockedByOther(),attr:{title:$data.obLockedByUser()}"></div>
						</div>
					</div>
					<div class="content parcel-content">
						<span data-bind="text:$data.obStreet()"></span>&nbsp;&nbsp;<span class="sm-sub-content "><span data-bind="text:$data.obStudentCountDisplay() "></span></span>
					</div>
					<div class="buttons">
						<div class="icon zoom-map-to-layers" title="Center Map" data-bind="click:$parent.viewModel.eventsManager.centerMapClick.bind($parent.viewModel.eventsManager)"></div>
						<div class="icon delete" title="Delete" data-bind="clickButton:{disable:!tf.authManager.isAuthorizedFor('routingMap',['add','edit']),click:$parent.viewModel.eventsManager.deleteClick.bind($parent.viewModel.eventsManager)}"></div>
					</div>
				</div>
			</div>
			<!--/ko-->
		</div>
		<div class="bottom-info-container">
			<div data-bind="text:display.obFooterDisplay() ? display.obFooterDisplay() : '0 Pool Stops'"></div>
		</div>
	</div>
</div>